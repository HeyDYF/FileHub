# LocalFileSend 功能模块

本模块实现了局域网内的文件互传功能，支持设备自动发现、文件发送和接收。该模块是 FileHub 项目的一个重要组成部分，旨在提供一个简单、安全且高效的文件共享解决方案。

#### **具体实现思路**

1. **设备发现**：
   - 使用广播或多播机制在局域网内自动发现其他设备。
   - 每个设备在启动时广播自己的存在，并监听其他设备的广播消息。
   - 设备信息（包括设备名和 IP 地址）被存储并显示在用户界面中。
2. **文件发送**：
   - 用户通过图形界面选择目标设备并选择要发送的文件。
   - 文件通过 TCP 连接发送到目标设备，支持大文件传输。
3. **文件接收**：
   - 启动接收服务，监听指定端口，接收来自其他设备的文件。
   - 接收到的文件将被保存到指定路径。

#### **技术使用**

- **Python**：使用 Python 编程语言实现整个模块。
- **Socket**：使用 Python 的 `socket` 模块进行网络通信，包括广播、TCP 连接等。
- **Tkinter**：使用 Tkinter 创建图形用户界面，提供设备选择和文件发送功能。
- **Threading**：使用多线程技术，确保设备发现、文件发送和接收功能可以同时运行。

#### **模块结构**

```
LocalFileSend/
├── discovery.py       # 设备发现模块
├── filetrans.py       # 文件传输模块
└── user.py            # 用户界面模块
```

#### **模块功能**

1. **设备发现**：
   - 自动发现局域网内的设备，并显示设备名和 IP 地址。
   - 支持动态更新设备列表。
2. **文件发送**：
   - 用户可以选择目标设备并发送文件。
   - 支持大文件传输，文件传输进度可通过控制台输出查看。
3. **文件接收**：
   - 后台运行接收服务，监听指定端口。
   - 接收到的文件将被保存到程序运行的当前目录下。

#### **运行方法**

1. **启动接收服务**：

   bash

   ```bash
   python filetrans.py receive --port 12346
   ```

   - 确保接收服务已启动并监听端口。

2. **启动用户界面**：

   bash

   ```bash
   python user.py
   ```

   - 设备列表会自动更新，显示发现的设备。
   - 用户可以选择目标设备并发送文件。

#### **注意事项**

- **防火墙设置**：确保目标设备的防火墙允许端口 `12346` 的通信。
- **网络连接**：确保发送端和接收端在同一局域网内。
- **文件保存路径**：接收的文件将保存在程序运行的当前目录下。可以修改代码指定特定的保存路径。

#### **模块限制**

- 当前实现未对文件传输进行加密，建议在安全的局域网内使用。
- 设备名默认使用主机名，用户可以自定义设备名以更好地区分设备。